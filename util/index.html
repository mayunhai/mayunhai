<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常用方法 | MaYunHai</title>
    <meta name="generator" content="VuePress 1.8.1">
    <link rel="icon" href="/mayunhai/favicon.ico">
    <link rel="manifest" href="/mayunhai/manifest.json">
    <link rel="apple-touch-icon" href="icons/home.png">
    <link rel="mask-icon" href="icons/home.png" color="#0388e3">
    <meta name="description" content="分享web前端相关的一些个人见解">
    <meta name="theme-color" content="#0388e3">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="icons/home.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/mayunhai/assets/css/0.styles.20f199e2.css" as="style"><link rel="preload" href="/mayunhai/assets/js/app.31cf851b.js" as="script"><link rel="preload" href="/mayunhai/assets/js/2.f955f218.js" as="script"><link rel="preload" href="/mayunhai/assets/js/20.d5696074.js" as="script"><link rel="preload" href="/mayunhai/assets/js/11.3096fc76.js" as="script"><link rel="prefetch" href="/mayunhai/assets/js/10.f20bb296.js"><link rel="prefetch" href="/mayunhai/assets/js/12.a1d9e77b.js"><link rel="prefetch" href="/mayunhai/assets/js/13.54f8d328.js"><link rel="prefetch" href="/mayunhai/assets/js/14.51bcec62.js"><link rel="prefetch" href="/mayunhai/assets/js/15.129e2828.js"><link rel="prefetch" href="/mayunhai/assets/js/16.d562e4fb.js"><link rel="prefetch" href="/mayunhai/assets/js/17.209427ee.js"><link rel="prefetch" href="/mayunhai/assets/js/18.064d59c5.js"><link rel="prefetch" href="/mayunhai/assets/js/19.632835e5.js"><link rel="prefetch" href="/mayunhai/assets/js/21.282e3bed.js"><link rel="prefetch" href="/mayunhai/assets/js/22.ebca9cb3.js"><link rel="prefetch" href="/mayunhai/assets/js/23.2ea5fc74.js"><link rel="prefetch" href="/mayunhai/assets/js/24.336a5cb9.js"><link rel="prefetch" href="/mayunhai/assets/js/25.7c449262.js"><link rel="prefetch" href="/mayunhai/assets/js/26.4cbc02e1.js"><link rel="prefetch" href="/mayunhai/assets/js/27.4db20911.js"><link rel="prefetch" href="/mayunhai/assets/js/28.e326325a.js"><link rel="prefetch" href="/mayunhai/assets/js/29.71bc5817.js"><link rel="prefetch" href="/mayunhai/assets/js/3.4919b817.js"><link rel="prefetch" href="/mayunhai/assets/js/30.ac0aa78a.js"><link rel="prefetch" href="/mayunhai/assets/js/31.dd41c270.js"><link rel="prefetch" href="/mayunhai/assets/js/32.103d21d6.js"><link rel="prefetch" href="/mayunhai/assets/js/33.be778db3.js"><link rel="prefetch" href="/mayunhai/assets/js/34.f90d02c4.js"><link rel="prefetch" href="/mayunhai/assets/js/35.2c8b3ad2.js"><link rel="prefetch" href="/mayunhai/assets/js/36.de182728.js"><link rel="prefetch" href="/mayunhai/assets/js/37.2d304f84.js"><link rel="prefetch" href="/mayunhai/assets/js/38.8b0c4554.js"><link rel="prefetch" href="/mayunhai/assets/js/39.140b493a.js"><link rel="prefetch" href="/mayunhai/assets/js/4.6971d544.js"><link rel="prefetch" href="/mayunhai/assets/js/40.31bb63dc.js"><link rel="prefetch" href="/mayunhai/assets/js/41.1eb2cbbd.js"><link rel="prefetch" href="/mayunhai/assets/js/42.6e127469.js"><link rel="prefetch" href="/mayunhai/assets/js/43.0215d670.js"><link rel="prefetch" href="/mayunhai/assets/js/44.8148a45b.js"><link rel="prefetch" href="/mayunhai/assets/js/45.dff2794a.js"><link rel="prefetch" href="/mayunhai/assets/js/46.7516bb0b.js"><link rel="prefetch" href="/mayunhai/assets/js/47.666ffb76.js"><link rel="prefetch" href="/mayunhai/assets/js/48.03def4dd.js"><link rel="prefetch" href="/mayunhai/assets/js/49.dae21900.js"><link rel="prefetch" href="/mayunhai/assets/js/5.36704b8c.js"><link rel="prefetch" href="/mayunhai/assets/js/50.581be928.js"><link rel="prefetch" href="/mayunhai/assets/js/51.c4295e69.js"><link rel="prefetch" href="/mayunhai/assets/js/52.723b67c0.js"><link rel="prefetch" href="/mayunhai/assets/js/53.06a22d5f.js"><link rel="prefetch" href="/mayunhai/assets/js/54.ad81c45e.js"><link rel="prefetch" href="/mayunhai/assets/js/55.9c99ef54.js"><link rel="prefetch" href="/mayunhai/assets/js/56.3fcfa58f.js"><link rel="prefetch" href="/mayunhai/assets/js/57.7cabfc52.js"><link rel="prefetch" href="/mayunhai/assets/js/58.3a39be14.js"><link rel="prefetch" href="/mayunhai/assets/js/6.d4a2e720.js"><link rel="prefetch" href="/mayunhai/assets/js/7.63d44e9b.js"><link rel="prefetch" href="/mayunhai/assets/js/8.ef65947b.js"><link rel="prefetch" href="/mayunhai/assets/js/9.b2379340.js">
    <link rel="stylesheet" href="/mayunhai/assets/css/0.styles.20f199e2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/mayunhai/" class="home-link router-link-active"><!----> <span class="site-name">MaYunHai</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/mayunhai/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/mayunhai/website/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/mayunhai/Regular/" class="nav-link">
  正则
</a></div><div class="nav-item"><a href="/mayunhai/VScode/" class="nav-link">
  VScode
</a></div><div class="nav-item"><a href="/mayunhai/array/" class="nav-link">
  Array
</a></div><div class="nav-item"><a href="/mayunhai/util/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Util
</a></div><div class="nav-item"><a href="/mayunhai/sort/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/mayunhai/blog/" class="nav-link">
  Blog
</a></div> <a href="https://github.com//mayunhai/mayunhai" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/mayunhai/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/mayunhai/website/" class="nav-link">
  网站
</a></div><div class="nav-item"><a href="/mayunhai/Regular/" class="nav-link">
  正则
</a></div><div class="nav-item"><a href="/mayunhai/VScode/" class="nav-link">
  VScode
</a></div><div class="nav-item"><a href="/mayunhai/array/" class="nav-link">
  Array
</a></div><div class="nav-item"><a href="/mayunhai/util/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Util
</a></div><div class="nav-item"><a href="/mayunhai/sort/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/mayunhai/blog/" class="nav-link">
  Blog
</a></div> <a href="https://github.com//mayunhai/mayunhai" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/mayunhai/util/" aria-current="page" class="active sidebar-link">常用方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mayunhai/util/#常用判断" class="sidebar-link">常用判断</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#首字母大写" class="sidebar-link">首字母大写</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#事件封装-兼容ie5-8" class="sidebar-link">事件封装（兼容IE5-8）</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#class操作" class="sidebar-link">class操作</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#cookie" class="sidebar-link">cookie</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#数组去重" class="sidebar-link">数组去重</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#去抖函数" class="sidebar-link">去抖函数</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#节流函数" class="sidebar-link">节流函数</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#格式化时间戳" class="sidebar-link">格式化时间戳</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#千分号格式化数字" class="sidebar-link">千分号格式化数字</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#克隆一个对象或者数组-深拷贝" class="sidebar-link">克隆一个对象或者数组(深拷贝)</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#对象拼接url传参字符串" class="sidebar-link">对象拼接URL传参字符串</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#获取url参数" class="sidebar-link">获取URL参数</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#key-codes" class="sidebar-link">key Codes</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#垂直滚动" class="sidebar-link">垂直滚动</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#arraybuffer转base64" class="sidebar-link">ArrayBuffer转Base64</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#拼音首字母排序" class="sidebar-link">拼音首字母排序</a></li><li class="sidebar-sub-header"><a href="/mayunhai/util/#扁平数据转树数据-已知单根" class="sidebar-link">扁平数据转树数据(已知单根)</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default" data-v-06643c89 data-v-06643c89><h1 id="常用方法" data-v-06643c89><a href="#常用方法" class="header-anchor" data-v-06643c89>#</a> 常用方法</h1> <p data-v-06643c89></p> <h2 id="常用判断" data-v-06643c89><a href="#常用判断" class="header-anchor" data-v-06643c89>#</a> 常用判断</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>isString</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>obj</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> <span class="token class-name" data-v-06643c89>Object</span><span class="token punctuation" data-v-06643c89>.</span>prototype<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>toString</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>call</span><span class="token punctuation" data-v-06643c89>(</span>obj<span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>===</span> <span class="token string" data-v-06643c89>'[object String]'</span>
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>isObject</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>obj</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> <span class="token class-name" data-v-06643c89>Object</span><span class="token punctuation" data-v-06643c89>.</span>prototype<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>toString</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>call</span><span class="token punctuation" data-v-06643c89>(</span>obj<span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>===</span> <span class="token string" data-v-06643c89>'[object Object]'</span>
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>isHtmlElement</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>node</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> node <span class="token keyword" data-v-06643c89>instanceof</span> <span class="token class-name" data-v-06643c89>HTMLElement</span>
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>isIE</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> <span class="token operator" data-v-06643c89>!</span><span class="token function" data-v-06643c89>isNaN</span><span class="token punctuation" data-v-06643c89>(</span><span class="token function" data-v-06643c89>Number</span><span class="token punctuation" data-v-06643c89>(</span>document<span class="token punctuation" data-v-06643c89>.</span>documentMode<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>;</span>

<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>isEdge</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> navigator<span class="token punctuation" data-v-06643c89>.</span>userAgent<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>indexOf</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'Edge'</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>&gt;</span> <span class="token operator" data-v-06643c89>-</span><span class="token number" data-v-06643c89>1</span>
<span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>;</span>

<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>isFirefox</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> <span class="token operator" data-v-06643c89>!</span><span class="token operator" data-v-06643c89>!</span>window<span class="token punctuation" data-v-06643c89>.</span>navigator<span class="token punctuation" data-v-06643c89>.</span>userAgent<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>match</span><span class="token punctuation" data-v-06643c89>(</span><span class="token regex" data-v-06643c89><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-source language-regex" data-v-06643c89>firefox</span><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-flags" data-v-06643c89>i</span></span><span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>;</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89><span class="line-number" data-v-06643c89>19</span><br data-v-06643c89><span class="line-number" data-v-06643c89>20</span><br data-v-06643c89><span class="line-number" data-v-06643c89>21</span><br data-v-06643c89><span class="line-number" data-v-06643c89>22</span><br data-v-06643c89><span class="line-number" data-v-06643c89>23</span><br data-v-06643c89></div></div><h2 id="首字母大写" data-v-06643c89><a href="#首字母大写" class="header-anchor" data-v-06643c89>#</a> 首字母大写</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>capitalize</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>str</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  str <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>String</span><span class="token punctuation" data-v-06643c89>(</span>str<span class="token punctuation" data-v-06643c89>)</span>
  <span class="token keyword" data-v-06643c89>return</span> str<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>charAt</span><span class="token punctuation" data-v-06643c89>(</span><span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>toUpperCase</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>+</span> str<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>slice</span><span class="token punctuation" data-v-06643c89>(</span><span class="token number" data-v-06643c89>1</span><span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89></div></div><h2 id="事件封装-兼容ie5-8" data-v-06643c89><a href="#事件封装-兼容ie5-8" class="header-anchor" data-v-06643c89>#</a> 事件封装（兼容IE5-8）</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>on</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>element<span class="token punctuation" data-v-06643c89>,</span> event<span class="token punctuation" data-v-06643c89>,</span> handler<span class="token punctuation" data-v-06643c89>,</span> capture <span class="token operator" data-v-06643c89>=</span> <span class="token boolean" data-v-06643c89>false</span></span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>element <span class="token operator" data-v-06643c89>&amp;&amp;</span> event <span class="token operator" data-v-06643c89>&amp;&amp;</span> handler<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>document<span class="token punctuation" data-v-06643c89>.</span>addEventListener<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      element<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>addEventListener</span><span class="token punctuation" data-v-06643c89>(</span>event<span class="token punctuation" data-v-06643c89>,</span> handler<span class="token punctuation" data-v-06643c89>,</span> capture<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token punctuation" data-v-06643c89>}</span> <span class="token keyword" data-v-06643c89>else</span> <span class="token punctuation" data-v-06643c89>{</span>
      element<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>attachEvent</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'on'</span> <span class="token operator" data-v-06643c89>+</span> event<span class="token punctuation" data-v-06643c89>,</span> handler<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token punctuation" data-v-06643c89>}</span>
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>off</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>element<span class="token punctuation" data-v-06643c89>,</span> event<span class="token punctuation" data-v-06643c89>,</span> handler<span class="token punctuation" data-v-06643c89>,</span> capture <span class="token operator" data-v-06643c89>=</span> <span class="token boolean" data-v-06643c89>false</span></span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>element <span class="token operator" data-v-06643c89>&amp;&amp;</span> event <span class="token operator" data-v-06643c89>&amp;&amp;</span> handler<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>document<span class="token punctuation" data-v-06643c89>.</span>addEventListener<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      element<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>removeEventListener</span><span class="token punctuation" data-v-06643c89>(</span>event<span class="token punctuation" data-v-06643c89>,</span> handler<span class="token punctuation" data-v-06643c89>,</span> capture<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token punctuation" data-v-06643c89>}</span> <span class="token keyword" data-v-06643c89>else</span> <span class="token punctuation" data-v-06643c89>{</span>
      element<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>detachEvent</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'on'</span> <span class="token operator" data-v-06643c89>+</span> event<span class="token punctuation" data-v-06643c89>,</span> handler<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token punctuation" data-v-06643c89>}</span>
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token comment" data-v-06643c89>// 直接 addEventListener options 里面配置 once 为 true 也是可以的，只是不兼容IE5-8</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>once</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>el<span class="token punctuation" data-v-06643c89>,</span> event<span class="token punctuation" data-v-06643c89>,</span> fn</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>const</span> <span class="token function-variable function" data-v-06643c89>listener</span> <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>function</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>fn<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      <span class="token function" data-v-06643c89>fn</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>apply</span><span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>this</span><span class="token punctuation" data-v-06643c89>,</span> arguments<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token punctuation" data-v-06643c89>}</span>
    <span class="token function" data-v-06643c89>off</span><span class="token punctuation" data-v-06643c89>(</span>el<span class="token punctuation" data-v-06643c89>,</span> event<span class="token punctuation" data-v-06643c89>,</span> listener<span class="token punctuation" data-v-06643c89>)</span>
  <span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>;</span>
  <span class="token function" data-v-06643c89>on</span><span class="token punctuation" data-v-06643c89>(</span>el<span class="token punctuation" data-v-06643c89>,</span> event<span class="token punctuation" data-v-06643c89>,</span> listener<span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>triggerEvent</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>elm<span class="token punctuation" data-v-06643c89>,</span> name<span class="token punctuation" data-v-06643c89>,</span> <span class="token operator" data-v-06643c89>...</span>opts</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>let</span> eventName<span class="token punctuation" data-v-06643c89>;</span>

  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token regex" data-v-06643c89><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-source language-regex" data-v-06643c89>^mouse|click</span><span class="token regex-delimiter" data-v-06643c89>/</span></span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>test</span><span class="token punctuation" data-v-06643c89>(</span>name<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    eventName <span class="token operator" data-v-06643c89>=</span> <span class="token string" data-v-06643c89>'MouseEvents'</span>
  <span class="token punctuation" data-v-06643c89>}</span> <span class="token keyword" data-v-06643c89>else</span> <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token regex" data-v-06643c89><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-source language-regex" data-v-06643c89>^key</span><span class="token regex-delimiter" data-v-06643c89>/</span></span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>test</span><span class="token punctuation" data-v-06643c89>(</span>name<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    eventName <span class="token operator" data-v-06643c89>=</span> <span class="token string" data-v-06643c89>'KeyboardEvent'</span>
  <span class="token punctuation" data-v-06643c89>}</span> <span class="token keyword" data-v-06643c89>else</span> <span class="token punctuation" data-v-06643c89>{</span>
    eventName <span class="token operator" data-v-06643c89>=</span> <span class="token string" data-v-06643c89>'HTMLEvents'</span>
  <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token keyword" data-v-06643c89>const</span> evt <span class="token operator" data-v-06643c89>=</span> document<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>createEvent</span><span class="token punctuation" data-v-06643c89>(</span>eventName<span class="token punctuation" data-v-06643c89>)</span>

  evt<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>initEvent</span><span class="token punctuation" data-v-06643c89>(</span>name<span class="token punctuation" data-v-06643c89>,</span> <span class="token operator" data-v-06643c89>...</span>opts<span class="token punctuation" data-v-06643c89>)</span>
  elm<span class="token punctuation" data-v-06643c89>.</span>dispatchEvent
    <span class="token operator" data-v-06643c89>?</span> elm<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>dispatchEvent</span><span class="token punctuation" data-v-06643c89>(</span>evt<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token operator" data-v-06643c89>:</span> elm<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>fireEvent</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'on'</span> <span class="token operator" data-v-06643c89>+</span> name<span class="token punctuation" data-v-06643c89>,</span> evt<span class="token punctuation" data-v-06643c89>)</span>

  <span class="token keyword" data-v-06643c89>return</span> elm
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89><span class="line-number" data-v-06643c89>19</span><br data-v-06643c89><span class="line-number" data-v-06643c89>20</span><br data-v-06643c89><span class="line-number" data-v-06643c89>21</span><br data-v-06643c89><span class="line-number" data-v-06643c89>22</span><br data-v-06643c89><span class="line-number" data-v-06643c89>23</span><br data-v-06643c89><span class="line-number" data-v-06643c89>24</span><br data-v-06643c89><span class="line-number" data-v-06643c89>25</span><br data-v-06643c89><span class="line-number" data-v-06643c89>26</span><br data-v-06643c89><span class="line-number" data-v-06643c89>27</span><br data-v-06643c89><span class="line-number" data-v-06643c89>28</span><br data-v-06643c89><span class="line-number" data-v-06643c89>29</span><br data-v-06643c89><span class="line-number" data-v-06643c89>30</span><br data-v-06643c89><span class="line-number" data-v-06643c89>31</span><br data-v-06643c89><span class="line-number" data-v-06643c89>32</span><br data-v-06643c89><span class="line-number" data-v-06643c89>33</span><br data-v-06643c89><span class="line-number" data-v-06643c89>34</span><br data-v-06643c89><span class="line-number" data-v-06643c89>35</span><br data-v-06643c89><span class="line-number" data-v-06643c89>36</span><br data-v-06643c89><span class="line-number" data-v-06643c89>37</span><br data-v-06643c89><span class="line-number" data-v-06643c89>38</span><br data-v-06643c89><span class="line-number" data-v-06643c89>39</span><br data-v-06643c89><span class="line-number" data-v-06643c89>40</span><br data-v-06643c89><span class="line-number" data-v-06643c89>41</span><br data-v-06643c89><span class="line-number" data-v-06643c89>42</span><br data-v-06643c89><span class="line-number" data-v-06643c89>43</span><br data-v-06643c89><span class="line-number" data-v-06643c89>44</span><br data-v-06643c89><span class="line-number" data-v-06643c89>45</span><br data-v-06643c89><span class="line-number" data-v-06643c89>46</span><br data-v-06643c89><span class="line-number" data-v-06643c89>47</span><br data-v-06643c89><span class="line-number" data-v-06643c89>48</span><br data-v-06643c89><span class="line-number" data-v-06643c89>49</span><br data-v-06643c89><span class="line-number" data-v-06643c89>50</span><br data-v-06643c89></div></div><h2 id="class操作" data-v-06643c89><a href="#class操作" class="header-anchor" data-v-06643c89>#</a> class操作</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token keyword" data-v-06643c89>const</span> <span class="token function-variable function" data-v-06643c89>hasClass</span> <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>function</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>obj<span class="token punctuation" data-v-06643c89>,</span> cls</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> obj<span class="token punctuation" data-v-06643c89>.</span>className<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>match</span><span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>new</span> <span class="token class-name" data-v-06643c89>RegExp</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'(\\s|^)'</span> <span class="token operator" data-v-06643c89>+</span> cls <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>'(\\s|$)'</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token keyword" data-v-06643c89>const</span> <span class="token function-variable function" data-v-06643c89>addClass</span> <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>function</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>obj<span class="token punctuation" data-v-06643c89>,</span> cls</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token operator" data-v-06643c89>!</span><span class="token function" data-v-06643c89>hasClass</span><span class="token punctuation" data-v-06643c89>(</span>obj<span class="token punctuation" data-v-06643c89>,</span> cls<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span> obj<span class="token punctuation" data-v-06643c89>.</span>className <span class="token operator" data-v-06643c89>+=</span> <span class="token string" data-v-06643c89>' '</span> <span class="token operator" data-v-06643c89>+</span> cls
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token keyword" data-v-06643c89>const</span> <span class="token function-variable function" data-v-06643c89>removeClass</span> <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>function</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>obj<span class="token punctuation" data-v-06643c89>,</span> cls</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token function" data-v-06643c89>hasClass</span><span class="token punctuation" data-v-06643c89>(</span>obj<span class="token punctuation" data-v-06643c89>,</span> cls<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>const</span> reg <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>new</span> <span class="token class-name" data-v-06643c89>RegExp</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'(\\s|^)'</span> <span class="token operator" data-v-06643c89>+</span> cls <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>'(\\s|$)'</span><span class="token punctuation" data-v-06643c89>)</span>
    obj<span class="token punctuation" data-v-06643c89>.</span>className <span class="token operator" data-v-06643c89>=</span> obj<span class="token punctuation" data-v-06643c89>.</span>className<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>replace</span><span class="token punctuation" data-v-06643c89>(</span>reg<span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>' '</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token punctuation" data-v-06643c89>}</span>
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token keyword" data-v-06643c89>const</span> <span class="token function-variable function" data-v-06643c89>toggleClass</span> <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>function</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>obj<span class="token punctuation" data-v-06643c89>,</span> cls</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token function" data-v-06643c89>hasClass</span><span class="token punctuation" data-v-06643c89>(</span>obj<span class="token punctuation" data-v-06643c89>,</span> cls<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token function" data-v-06643c89>removeClass</span><span class="token punctuation" data-v-06643c89>(</span>obj<span class="token punctuation" data-v-06643c89>,</span> cls<span class="token punctuation" data-v-06643c89>)</span>
  <span class="token punctuation" data-v-06643c89>}</span> <span class="token keyword" data-v-06643c89>else</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token function" data-v-06643c89>addClass</span><span class="token punctuation" data-v-06643c89>(</span>obj<span class="token punctuation" data-v-06643c89>,</span> cls<span class="token punctuation" data-v-06643c89>)</span>
  <span class="token punctuation" data-v-06643c89>}</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89><span class="line-number" data-v-06643c89>19</span><br data-v-06643c89><span class="line-number" data-v-06643c89>20</span><br data-v-06643c89><span class="line-number" data-v-06643c89>21</span><br data-v-06643c89><span class="line-number" data-v-06643c89>22</span><br data-v-06643c89></div></div><h2 id="cookie" data-v-06643c89><a href="#cookie" class="header-anchor" data-v-06643c89>#</a> cookie</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>setCookie</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>cname<span class="token punctuation" data-v-06643c89>,</span> cvalue<span class="token punctuation" data-v-06643c89>,</span> exdays <span class="token operator" data-v-06643c89>=</span> <span class="token number" data-v-06643c89>99999</span></span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>const</span> d <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>new</span> <span class="token class-name" data-v-06643c89>Date</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span>
  d<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>setTime</span><span class="token punctuation" data-v-06643c89>(</span>d<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>getTime</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>+</span> <span class="token punctuation" data-v-06643c89>(</span>exdays<span class="token operator" data-v-06643c89>*</span><span class="token number" data-v-06643c89>24</span><span class="token operator" data-v-06643c89>*</span><span class="token number" data-v-06643c89>60</span><span class="token operator" data-v-06643c89>*</span><span class="token number" data-v-06643c89>60</span><span class="token operator" data-v-06643c89>*</span><span class="token number" data-v-06643c89>1000</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token keyword" data-v-06643c89>const</span> expires <span class="token operator" data-v-06643c89>=</span> <span class="token string" data-v-06643c89>&quot;expires=&quot;</span><span class="token operator" data-v-06643c89>+</span> d<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>toUTCString</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span>
  document<span class="token punctuation" data-v-06643c89>.</span>cookie <span class="token operator" data-v-06643c89>=</span> cname <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>&quot;=&quot;</span> <span class="token operator" data-v-06643c89>+</span> cvalue <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>&quot;;&quot;</span> <span class="token operator" data-v-06643c89>+</span> expires <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>&quot;;path=/&quot;</span>
<span class="token punctuation" data-v-06643c89>}</span>

<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>getCookie</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>cname</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>const</span> name <span class="token operator" data-v-06643c89>=</span> cname <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>&quot;=&quot;</span><span class="token punctuation" data-v-06643c89>;</span>
  <span class="token keyword" data-v-06643c89>const</span> decodedCookie <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>decodeURIComponent</span><span class="token punctuation" data-v-06643c89>(</span>document<span class="token punctuation" data-v-06643c89>.</span>cookie<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>;</span>
  <span class="token keyword" data-v-06643c89>const</span> ca <span class="token operator" data-v-06643c89>=</span> decodedCookie<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>split</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>';'</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>;</span>
  <span class="token keyword" data-v-06643c89>for</span><span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>let</span> i <span class="token operator" data-v-06643c89>=</span> <span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>;</span> i <span class="token operator" data-v-06643c89>&lt;</span>ca<span class="token punctuation" data-v-06643c89>.</span>length<span class="token punctuation" data-v-06643c89>;</span> i<span class="token operator" data-v-06643c89>++</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      <span class="token keyword" data-v-06643c89>let</span> c <span class="token operator" data-v-06643c89>=</span> ca<span class="token punctuation" data-v-06643c89>[</span>i<span class="token punctuation" data-v-06643c89>]</span>
      <span class="token keyword" data-v-06643c89>while</span> <span class="token punctuation" data-v-06643c89>(</span>c<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>charAt</span><span class="token punctuation" data-v-06643c89>(</span><span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>==</span> <span class="token string" data-v-06643c89>' '</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
          c <span class="token operator" data-v-06643c89>=</span> c<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>substring</span><span class="token punctuation" data-v-06643c89>(</span><span class="token number" data-v-06643c89>1</span><span class="token punctuation" data-v-06643c89>)</span>
       <span class="token punctuation" data-v-06643c89>}</span>
       <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>c<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>indexOf</span><span class="token punctuation" data-v-06643c89>(</span>name<span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>==</span> <span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
          <span class="token keyword" data-v-06643c89>return</span> c<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>substring</span><span class="token punctuation" data-v-06643c89>(</span>name<span class="token punctuation" data-v-06643c89>.</span>length<span class="token punctuation" data-v-06643c89>,</span> c<span class="token punctuation" data-v-06643c89>.</span>length<span class="token punctuation" data-v-06643c89>)</span>
       <span class="token punctuation" data-v-06643c89>}</span>
   <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token keyword" data-v-06643c89>return</span> <span class="token string" data-v-06643c89>&quot;&quot;</span><span class="token punctuation" data-v-06643c89>;</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89><span class="line-number" data-v-06643c89>19</span><br data-v-06643c89><span class="line-number" data-v-06643c89>20</span><br data-v-06643c89><span class="line-number" data-v-06643c89>21</span><br data-v-06643c89><span class="line-number" data-v-06643c89>22</span><br data-v-06643c89></div></div><h2 id="数组去重" data-v-06643c89><a href="#数组去重" class="header-anchor" data-v-06643c89>#</a> 数组去重</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 数组去重
 * @param {Array} arr 需要被去重的数组
 * @return {Array}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>uniqueArr</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>arr</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> Array<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>from</span><span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>new</span> <span class="token class-name" data-v-06643c89>Set</span><span class="token punctuation" data-v-06643c89>(</span>arr<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89></div></div><h2 id="去抖函数" data-v-06643c89><a href="#去抖函数" class="header-anchor" data-v-06643c89>#</a> 去抖函数</h2> <div class="custom-block tip" data-v-06643c89><p class="custom-block-title" data-v-06643c89>TIP</p> <p data-v-06643c89>下面两个方法功能容易被混淆，这里强调一下</p> <ul data-v-06643c89><li data-v-06643c89><p data-v-06643c89>去抖：在小于固定延时 <code data-v-06643c89>wait</code> 中连续触发时不触发，直到超过延时阈值才会触发，<code data-v-06643c89>immediate</code> 传参为 <code data-v-06643c89>true</code> 是立刻触发（连续触发无论多久一轮只会触发一次）</p></li> <li data-v-06643c89><p data-v-06643c89>节流：在小于固定延时 <code data-v-06643c89>wait</code> 中连续触发时每隔 <code data-v-06643c89>wait</code> 触发一次（连续触发可能触发多次）</p></li></ul></div> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 去抖函数
 * @param {Function} func 触发的回调函数
 * @param {Number} wait 间隔时间（毫秒）
 * @param {Boolean} immediate 是否需要立刻执行函数 默认 false
 * @return {*}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>debounce</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>func<span class="token punctuation" data-v-06643c89>,</span> wait<span class="token punctuation" data-v-06643c89>,</span> immediate</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>let</span> timeout<span class="token punctuation" data-v-06643c89>,</span> args<span class="token punctuation" data-v-06643c89>,</span> context<span class="token punctuation" data-v-06643c89>,</span> timestamp<span class="token punctuation" data-v-06643c89>,</span> result
  <span class="token keyword" data-v-06643c89>const</span> <span class="token function-variable function" data-v-06643c89>later</span> <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>function</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token comment" data-v-06643c89>// 据上一次触发时间间隔</span>
    <span class="token keyword" data-v-06643c89>const</span> last <span class="token operator" data-v-06643c89>=</span> <span class="token operator" data-v-06643c89>+</span><span class="token keyword" data-v-06643c89>new</span> <span class="token class-name" data-v-06643c89>Date</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>-</span> timestamp
    <span class="token comment" data-v-06643c89>// 上次被包装函数被调用时间间隔 last 小于设定时间间隔 wait</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>last <span class="token operator" data-v-06643c89>&lt;</span> wait <span class="token operator" data-v-06643c89>&amp;&amp;</span> last <span class="token operator" data-v-06643c89>&gt;</span> <span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      timeout <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>setTimeout</span><span class="token punctuation" data-v-06643c89>(</span>later<span class="token punctuation" data-v-06643c89>,</span> wait <span class="token operator" data-v-06643c89>-</span> last<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token punctuation" data-v-06643c89>}</span> <span class="token keyword" data-v-06643c89>else</span> <span class="token punctuation" data-v-06643c89>{</span>
      timeout <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>null</span>
      <span class="token comment" data-v-06643c89>// 如果设定为immediate===true，因为开始边界已经调用过了此处无需调用</span>
      <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token operator" data-v-06643c89>!</span>immediate<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
        result <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>func</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>apply</span><span class="token punctuation" data-v-06643c89>(</span>context<span class="token punctuation" data-v-06643c89>,</span> args<span class="token punctuation" data-v-06643c89>)</span>
        <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token operator" data-v-06643c89>!</span>timeout<span class="token punctuation" data-v-06643c89>)</span> context <span class="token operator" data-v-06643c89>=</span> args <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>null</span>
      <span class="token punctuation" data-v-06643c89>}</span>
    <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token keyword" data-v-06643c89>return</span> <span class="token keyword" data-v-06643c89>function</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    args <span class="token operator" data-v-06643c89>=</span> arguments
    context <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>this</span>
    timestamp <span class="token operator" data-v-06643c89>=</span> <span class="token operator" data-v-06643c89>+</span><span class="token keyword" data-v-06643c89>new</span> <span class="token class-name" data-v-06643c89>Date</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span>
    <span class="token keyword" data-v-06643c89>const</span> callNow <span class="token operator" data-v-06643c89>=</span> immediate <span class="token operator" data-v-06643c89>&amp;&amp;</span> <span class="token operator" data-v-06643c89>!</span>timeout
    <span class="token comment" data-v-06643c89>// 如果延时不存在，重新设定延时</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token operator" data-v-06643c89>!</span>timeout<span class="token punctuation" data-v-06643c89>)</span> timeout <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>setTimeout</span><span class="token punctuation" data-v-06643c89>(</span>later<span class="token punctuation" data-v-06643c89>,</span> wait<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>callNow<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      result <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>func</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>apply</span><span class="token punctuation" data-v-06643c89>(</span>context<span class="token punctuation" data-v-06643c89>,</span> args<span class="token punctuation" data-v-06643c89>)</span>
      context <span class="token operator" data-v-06643c89>=</span> args <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>null</span>
    <span class="token punctuation" data-v-06643c89>}</span>
    <span class="token keyword" data-v-06643c89>return</span> result
  <span class="token punctuation" data-v-06643c89>}</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89><span class="line-number" data-v-06643c89>19</span><br data-v-06643c89><span class="line-number" data-v-06643c89>20</span><br data-v-06643c89><span class="line-number" data-v-06643c89>21</span><br data-v-06643c89><span class="line-number" data-v-06643c89>22</span><br data-v-06643c89><span class="line-number" data-v-06643c89>23</span><br data-v-06643c89><span class="line-number" data-v-06643c89>24</span><br data-v-06643c89><span class="line-number" data-v-06643c89>25</span><br data-v-06643c89><span class="line-number" data-v-06643c89>26</span><br data-v-06643c89><span class="line-number" data-v-06643c89>27</span><br data-v-06643c89><span class="line-number" data-v-06643c89>28</span><br data-v-06643c89><span class="line-number" data-v-06643c89>29</span><br data-v-06643c89><span class="line-number" data-v-06643c89>30</span><br data-v-06643c89><span class="line-number" data-v-06643c89>31</span><br data-v-06643c89><span class="line-number" data-v-06643c89>32</span><br data-v-06643c89><span class="line-number" data-v-06643c89>33</span><br data-v-06643c89><span class="line-number" data-v-06643c89>34</span><br data-v-06643c89><span class="line-number" data-v-06643c89>35</span><br data-v-06643c89><span class="line-number" data-v-06643c89>36</span><br data-v-06643c89><span class="line-number" data-v-06643c89>37</span><br data-v-06643c89><span class="line-number" data-v-06643c89>38</span><br data-v-06643c89></div></div><h2 id="节流函数" data-v-06643c89><a href="#节流函数" class="header-anchor" data-v-06643c89>#</a> 节流函数</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 节流函数
 * @param {Function} func 触发的回调函数
 * @param {Number} wait 间隔时间（毫秒）
 * @return {*}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>throttle</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>func<span class="token punctuation" data-v-06643c89>,</span> wait</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>let</span> previous <span class="token operator" data-v-06643c89>=</span> <span class="token number" data-v-06643c89>0</span>
  <span class="token keyword" data-v-06643c89>return</span> <span class="token keyword" data-v-06643c89>function</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>const</span> now <span class="token operator" data-v-06643c89>=</span> Date<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>now</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span>
    <span class="token keyword" data-v-06643c89>const</span> context <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>this</span>
    <span class="token keyword" data-v-06643c89>const</span> args <span class="token operator" data-v-06643c89>=</span> arguments
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>now <span class="token operator" data-v-06643c89>-</span> previous <span class="token operator" data-v-06643c89>&gt;</span> wait<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      <span class="token function" data-v-06643c89>func</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>apply</span><span class="token punctuation" data-v-06643c89>(</span>context<span class="token punctuation" data-v-06643c89>,</span> args<span class="token punctuation" data-v-06643c89>)</span>
      previous <span class="token operator" data-v-06643c89>=</span> now
    <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token punctuation" data-v-06643c89>}</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89></div></div><h2 id="格式化时间戳" data-v-06643c89><a href="#格式化时间戳" class="header-anchor" data-v-06643c89>#</a> 格式化时间戳</h2> <div class="custom-block tip" data-v-06643c89><p class="custom-block-title" data-v-06643c89>TIP</p> <p data-v-06643c89>用 <code data-v-06643c89>new Date()</code> 把字符串转化为时间戳的时候
IOS只支持 '2016/06/18 11:11:11'，不支持 '2016-06-18 11:11:11' 的转换，安卓双支持</p> <p data-v-06643c89>所以需要 <code data-v-06643c89>time = time.replace(new RegExp(/-/gm), '/')</code> 处理后再统一处理</p></div> <div class="language-js line-numbers-mode" data-v-06643c89><div class="highlight-lines" data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><div class="highlighted" data-v-06643c89> </div><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89><br data-v-06643c89></div><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 格式化时间戳
 * @param {String, Number} time 需要格式化时间或者时间戳
 * @param {String} cFormat 需要格式化的样式 默认 '{y}-{m}-{d} {h}:{i}:{s}'
 * @return {String}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>parseTime</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>time<span class="token punctuation" data-v-06643c89>,</span> cFormat</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>arguments<span class="token punctuation" data-v-06643c89>.</span>length <span class="token operator" data-v-06643c89>===</span> <span class="token number" data-v-06643c89>0</span> <span class="token operator" data-v-06643c89>||</span> <span class="token operator" data-v-06643c89>!</span>time<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>return</span> <span class="token keyword" data-v-06643c89>null</span>
  <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token keyword" data-v-06643c89>const</span> format <span class="token operator" data-v-06643c89>=</span> cFormat <span class="token operator" data-v-06643c89>||</span> <span class="token string" data-v-06643c89>'{y}-{m}-{d} {h}:{i}:{s}'</span>
  <span class="token keyword" data-v-06643c89>let</span> date
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>typeof</span> time <span class="token operator" data-v-06643c89>===</span> <span class="token string" data-v-06643c89>'object'</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    date <span class="token operator" data-v-06643c89>=</span> time
  <span class="token punctuation" data-v-06643c89>}</span> <span class="token keyword" data-v-06643c89>else</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>typeof</span> time <span class="token operator" data-v-06643c89>===</span> <span class="token string" data-v-06643c89>'string'</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>(</span><span class="token regex" data-v-06643c89><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-source language-regex" data-v-06643c89>^[0-9]+$</span><span class="token regex-delimiter" data-v-06643c89>/</span></span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>test</span><span class="token punctuation" data-v-06643c89>(</span>time<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
        <span class="token comment" data-v-06643c89>// support &quot;1548221490638&quot;</span>
        time <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>parseInt</span><span class="token punctuation" data-v-06643c89>(</span>time<span class="token punctuation" data-v-06643c89>)</span>
      <span class="token punctuation" data-v-06643c89>}</span> <span class="token keyword" data-v-06643c89>else</span> <span class="token punctuation" data-v-06643c89>{</span>
        <span class="token comment" data-v-06643c89>// support safari</span>
        <span class="token comment" data-v-06643c89>// https://stackoverflow.com/questions/4310953/invalid-date-in-safari</span>
        time <span class="token operator" data-v-06643c89>=</span> time<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>replace</span><span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>new</span> <span class="token class-name" data-v-06643c89>RegExp</span><span class="token punctuation" data-v-06643c89>(</span><span class="token regex" data-v-06643c89><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-source language-regex" data-v-06643c89>-</span><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-flags" data-v-06643c89>gm</span></span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>'/'</span><span class="token punctuation" data-v-06643c89>)</span>
      <span class="token punctuation" data-v-06643c89>}</span>
    <span class="token punctuation" data-v-06643c89>}</span>

    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>typeof</span> time <span class="token operator" data-v-06643c89>===</span> <span class="token string" data-v-06643c89>'number'</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>&amp;&amp;</span> <span class="token punctuation" data-v-06643c89>(</span>time<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>toString</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span>length <span class="token operator" data-v-06643c89>===</span> <span class="token number" data-v-06643c89>10</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      time <span class="token operator" data-v-06643c89>=</span> time <span class="token operator" data-v-06643c89>*</span> <span class="token number" data-v-06643c89>1000</span>
    <span class="token punctuation" data-v-06643c89>}</span>
    date <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>new</span> <span class="token class-name" data-v-06643c89>Date</span><span class="token punctuation" data-v-06643c89>(</span>time<span class="token punctuation" data-v-06643c89>)</span>
  <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token keyword" data-v-06643c89>const</span> formatObj <span class="token operator" data-v-06643c89>=</span> <span class="token punctuation" data-v-06643c89>{</span>
    y<span class="token operator" data-v-06643c89>:</span> date<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>getFullYear</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>,</span>
    m<span class="token operator" data-v-06643c89>:</span> date<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>getMonth</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>+</span> <span class="token number" data-v-06643c89>1</span><span class="token punctuation" data-v-06643c89>,</span>
    d<span class="token operator" data-v-06643c89>:</span> date<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>getDate</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>,</span>
    h<span class="token operator" data-v-06643c89>:</span> date<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>getHours</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>,</span>
    i<span class="token operator" data-v-06643c89>:</span> date<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>getMinutes</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>,</span>
    s<span class="token operator" data-v-06643c89>:</span> date<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>getSeconds</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>,</span>
    a<span class="token operator" data-v-06643c89>:</span> date<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>getDay</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token keyword" data-v-06643c89>const</span> time_str <span class="token operator" data-v-06643c89>=</span> format<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>replace</span><span class="token punctuation" data-v-06643c89>(</span><span class="token regex" data-v-06643c89><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-source language-regex" data-v-06643c89>{([ymdhisa])+}</span><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-flags" data-v-06643c89>g</span></span><span class="token punctuation" data-v-06643c89>,</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>result<span class="token punctuation" data-v-06643c89>,</span> key</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>=&gt;</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>const</span> value <span class="token operator" data-v-06643c89>=</span> formatObj<span class="token punctuation" data-v-06643c89>[</span>key<span class="token punctuation" data-v-06643c89>]</span>
    <span class="token comment" data-v-06643c89>// Note: getDay() returns 0 on Sunday</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>key <span class="token operator" data-v-06643c89>===</span> <span class="token string" data-v-06643c89>'a'</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span> <span class="token keyword" data-v-06643c89>return</span> <span class="token punctuation" data-v-06643c89>[</span><span class="token string" data-v-06643c89>'日'</span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>'一'</span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>'二'</span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>'三'</span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>'四'</span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>'五'</span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>'六'</span><span class="token punctuation" data-v-06643c89>]</span><span class="token punctuation" data-v-06643c89>[</span>value <span class="token punctuation" data-v-06643c89>]</span> <span class="token punctuation" data-v-06643c89>}</span>
    <span class="token keyword" data-v-06643c89>return</span> value<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>toString</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>padStart</span><span class="token punctuation" data-v-06643c89>(</span><span class="token number" data-v-06643c89>2</span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>'0'</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token keyword" data-v-06643c89>return</span> time_str
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre><div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89><span class="line-number" data-v-06643c89>19</span><br data-v-06643c89><span class="line-number" data-v-06643c89>20</span><br data-v-06643c89><span class="line-number" data-v-06643c89>21</span><br data-v-06643c89><span class="line-number" data-v-06643c89>22</span><br data-v-06643c89><span class="line-number" data-v-06643c89>23</span><br data-v-06643c89><span class="line-number" data-v-06643c89>24</span><br data-v-06643c89><span class="line-number" data-v-06643c89>25</span><br data-v-06643c89><span class="line-number" data-v-06643c89>26</span><br data-v-06643c89><span class="line-number" data-v-06643c89>27</span><br data-v-06643c89><span class="line-number" data-v-06643c89>28</span><br data-v-06643c89><span class="line-number" data-v-06643c89>29</span><br data-v-06643c89><span class="line-number" data-v-06643c89>30</span><br data-v-06643c89><span class="line-number" data-v-06643c89>31</span><br data-v-06643c89><span class="line-number" data-v-06643c89>32</span><br data-v-06643c89><span class="line-number" data-v-06643c89>33</span><br data-v-06643c89><span class="line-number" data-v-06643c89>34</span><br data-v-06643c89><span class="line-number" data-v-06643c89>35</span><br data-v-06643c89><span class="line-number" data-v-06643c89>36</span><br data-v-06643c89><span class="line-number" data-v-06643c89>37</span><br data-v-06643c89><span class="line-number" data-v-06643c89>38</span><br data-v-06643c89><span class="line-number" data-v-06643c89>39</span><br data-v-06643c89><span class="line-number" data-v-06643c89>40</span><br data-v-06643c89><span class="line-number" data-v-06643c89>41</span><br data-v-06643c89><span class="line-number" data-v-06643c89>42</span><br data-v-06643c89><span class="line-number" data-v-06643c89>43</span><br data-v-06643c89><span class="line-number" data-v-06643c89>44</span><br data-v-06643c89><span class="line-number" data-v-06643c89>45</span><br data-v-06643c89><span class="line-number" data-v-06643c89>46</span><br data-v-06643c89><span class="line-number" data-v-06643c89>47</span><br data-v-06643c89><span class="line-number" data-v-06643c89>48</span><br data-v-06643c89></div></div><h2 id="千分号格式化数字" data-v-06643c89><a href="#千分号格式化数字" class="header-anchor" data-v-06643c89>#</a> 千分号格式化数字</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 千分号格式化数字
 * @param {Number} s 需要被格式化的数字
 * @param {Number} n 保留小数的位数 默认2
 * @return {String}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>fomatNumber</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>s<span class="token punctuation" data-v-06643c89>,</span> n</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  n <span class="token operator" data-v-06643c89>=</span> n <span class="token operator" data-v-06643c89>=</span> <span class="token number" data-v-06643c89>0</span> <span class="token operator" data-v-06643c89>&amp;&amp;</span> n <span class="token operator" data-v-06643c89>&lt;=</span> <span class="token number" data-v-06643c89>20</span> <span class="token operator" data-v-06643c89>?</span> n <span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>2</span>
  s <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>parseFloat</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>(</span>s <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>&quot;&quot;</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>replace</span><span class="token punctuation" data-v-06643c89>(</span><span class="token regex" data-v-06643c89><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-source language-regex" data-v-06643c89>[^\d\.-]</span><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-flags" data-v-06643c89>g</span></span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>&quot;&quot;</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>toFixed</span><span class="token punctuation" data-v-06643c89>(</span>n<span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>&quot;&quot;</span>
  <span class="token keyword" data-v-06643c89>var</span> l <span class="token operator" data-v-06643c89>=</span> s<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>split</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>&quot;.&quot;</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>[</span><span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>]</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>split</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>&quot;&quot;</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>reverse</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span>
  r <span class="token operator" data-v-06643c89>=</span> s<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>split</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>&quot;.&quot;</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>[</span><span class="token number" data-v-06643c89>1</span><span class="token punctuation" data-v-06643c89>]</span>
  t <span class="token operator" data-v-06643c89>=</span> <span class="token string" data-v-06643c89>&quot;&quot;</span>
  <span class="token keyword" data-v-06643c89>for</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>let</span> i <span class="token operator" data-v-06643c89>=</span> <span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>;</span> i <span class="token operator" data-v-06643c89>&lt;</span> l<span class="token punctuation" data-v-06643c89>.</span>length<span class="token punctuation" data-v-06643c89>;</span> i<span class="token operator" data-v-06643c89>++</span><span class="token punctuation" data-v-06643c89>)</span>
    t <span class="token operator" data-v-06643c89>+=</span> l<span class="token punctuation" data-v-06643c89>[</span>i<span class="token punctuation" data-v-06643c89>]</span> <span class="token operator" data-v-06643c89>+</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>(</span>i <span class="token operator" data-v-06643c89>+</span> <span class="token number" data-v-06643c89>1</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>%</span> <span class="token number" data-v-06643c89>3</span> <span class="token operator" data-v-06643c89>==</span> <span class="token number" data-v-06643c89>0</span> <span class="token operator" data-v-06643c89>&amp;&amp;</span> <span class="token punctuation" data-v-06643c89>(</span>i <span class="token operator" data-v-06643c89>+</span> <span class="token number" data-v-06643c89>1</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>!=</span> l<span class="token punctuation" data-v-06643c89>.</span>length <span class="token operator" data-v-06643c89>?</span> <span class="token string" data-v-06643c89>&quot;,&quot;</span> <span class="token operator" data-v-06643c89>:</span> <span class="token string" data-v-06643c89>&quot;&quot;</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>n <span class="token operator" data-v-06643c89>==</span> <span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>)</span>
    <span class="token keyword" data-v-06643c89>return</span> t<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>split</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>&quot;&quot;</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>reverse</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>join</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>&quot;&quot;</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token keyword" data-v-06643c89>else</span>
    <span class="token keyword" data-v-06643c89>return</span> t<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>split</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>&quot;&quot;</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>reverse</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>join</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>&quot;&quot;</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>&quot;.&quot;</span> <span class="token operator" data-v-06643c89>+</span> r
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89><span class="line-number" data-v-06643c89>19</span><br data-v-06643c89></div></div><h2 id="克隆一个对象或者数组-深拷贝" data-v-06643c89><a href="#克隆一个对象或者数组-深拷贝" class="header-anchor" data-v-06643c89>#</a> 克隆一个对象或者数组(深拷贝)</h2> <div class="custom-block tip" data-v-06643c89><p class="custom-block-title" data-v-06643c89>TIP</p> <p data-v-06643c89>浅拷贝：<code data-v-06643c89>Object.assign([], arr)</code>、<code data-v-06643c89>Object.assign({}, obj)</code> or <code data-v-06643c89>[...arr]</code>、<code data-v-06643c89>{...obj}</code></p> <p data-v-06643c89>这里我想要强调一下，浅拷贝是复制一层不是直接赋值，面试过很多人对此都有误解。其实大部分场景浅拷贝足矣，无需深拷贝</p></div> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 克隆一个对象或者数组(深拷贝)
 * @param {Object, Array} source 需要被拷贝的对象或者数组
 * @return {Object, Array}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>deepClone</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>source</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>typeof</span> source <span class="token operator" data-v-06643c89>==</span> <span class="token string" data-v-06643c89>'object'</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>const</span> targetObj <span class="token operator" data-v-06643c89>=</span> source<span class="token punctuation" data-v-06643c89>.</span>constructor <span class="token operator" data-v-06643c89>===</span> Array <span class="token operator" data-v-06643c89>?</span> <span class="token punctuation" data-v-06643c89>[</span><span class="token punctuation" data-v-06643c89>]</span> <span class="token operator" data-v-06643c89>:</span> <span class="token punctuation" data-v-06643c89>{</span><span class="token punctuation" data-v-06643c89>}</span>
    Object<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>keys</span><span class="token punctuation" data-v-06643c89>(</span>source<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>forEach</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>(</span>keys<span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>=</span> <span class="token punctuation" data-v-06643c89>{</span>
      <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>source<span class="token punctuation" data-v-06643c89>[</span>keys<span class="token punctuation" data-v-06643c89>]</span> <span class="token operator" data-v-06643c89>&amp;&amp;</span> <span class="token keyword" data-v-06643c89>typeof</span> source<span class="token punctuation" data-v-06643c89>[</span>keys<span class="token punctuation" data-v-06643c89>]</span> <span class="token operator" data-v-06643c89>===</span> <span class="token string" data-v-06643c89>'object'</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
        targetObj<span class="token punctuation" data-v-06643c89>[</span>keys<span class="token punctuation" data-v-06643c89>]</span> <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>deepClone</span><span class="token punctuation" data-v-06643c89>(</span>source<span class="token punctuation" data-v-06643c89>[</span>keys<span class="token punctuation" data-v-06643c89>]</span><span class="token punctuation" data-v-06643c89>)</span>
      <span class="token punctuation" data-v-06643c89>}</span> <span class="token keyword" data-v-06643c89>else</span> <span class="token punctuation" data-v-06643c89>{</span>
        targetObj<span class="token punctuation" data-v-06643c89>[</span>keys<span class="token punctuation" data-v-06643c89>]</span> <span class="token operator" data-v-06643c89>=</span> source<span class="token punctuation" data-v-06643c89>[</span>keys<span class="token punctuation" data-v-06643c89>]</span>
      <span class="token punctuation" data-v-06643c89>}</span>
    <span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>)</span>
    <span class="token keyword" data-v-06643c89>return</span> targetObj
  <span class="token punctuation" data-v-06643c89>}</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89></div></div><h2 id="对象拼接url传参字符串" data-v-06643c89><a href="#对象拼接url传参字符串" class="header-anchor" data-v-06643c89>#</a> 对象拼接URL传参字符串</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 对象拼接URL传参字符串
 * @param {Object} json get传参对象
 * @return {String}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>obj2Param</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>json</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token operator" data-v-06643c89>!</span>json<span class="token punctuation" data-v-06643c89>)</span> <span class="token keyword" data-v-06643c89>return</span> <span class="token string" data-v-06643c89>''</span>
  <span class="token keyword" data-v-06643c89>return</span> Object<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>assign</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>[</span><span class="token punctuation" data-v-06643c89>]</span><span class="token punctuation" data-v-06643c89>,</span> Object<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>keys</span><span class="token punctuation" data-v-06643c89>(</span>json<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>map</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>key</span> <span class="token operator" data-v-06643c89>=&gt;</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>json<span class="token punctuation" data-v-06643c89>[</span>key<span class="token punctuation" data-v-06643c89>]</span> <span class="token operator" data-v-06643c89>===</span> <span class="token keyword" data-v-06643c89>undefined</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token keyword" data-v-06643c89>return</span> <span class="token string" data-v-06643c89>''</span>
    <span class="token keyword" data-v-06643c89>return</span> <span class="token function" data-v-06643c89>encodeURIComponent</span><span class="token punctuation" data-v-06643c89>(</span>key<span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>+</span> <span class="token string" data-v-06643c89>'='</span> <span class="token operator" data-v-06643c89>+</span>
      <span class="token function" data-v-06643c89>encodeURIComponent</span><span class="token punctuation" data-v-06643c89>(</span>json<span class="token punctuation" data-v-06643c89>[</span>key<span class="token punctuation" data-v-06643c89>]</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>join</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'&amp;'</span><span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89></div></div><h2 id="获取url参数" data-v-06643c89><a href="#获取url参数" class="header-anchor" data-v-06643c89>#</a> 获取URL参数</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 获取URL参数
 * @param {String} url 需要解析参数的url
 * @return {Object}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>param2Obj</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>url</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>const</span> search <span class="token operator" data-v-06643c89>=</span> <span class="token function" data-v-06643c89>decodeURIComponent</span><span class="token punctuation" data-v-06643c89>(</span>url<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>split</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'?'</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>[</span><span class="token number" data-v-06643c89>1</span><span class="token punctuation" data-v-06643c89>]</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>replace</span><span class="token punctuation" data-v-06643c89>(</span><span class="token regex" data-v-06643c89><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-source language-regex" data-v-06643c89>\+</span><span class="token regex-delimiter" data-v-06643c89>/</span><span class="token regex-flags" data-v-06643c89>g</span></span><span class="token punctuation" data-v-06643c89>,</span> <span class="token string" data-v-06643c89>' '</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token operator" data-v-06643c89>!</span>search<span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token keyword" data-v-06643c89>return</span> <span class="token punctuation" data-v-06643c89>{</span><span class="token punctuation" data-v-06643c89>}</span>
  <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token keyword" data-v-06643c89>const</span> obj <span class="token operator" data-v-06643c89>=</span> <span class="token punctuation" data-v-06643c89>{</span><span class="token punctuation" data-v-06643c89>}</span>
  <span class="token keyword" data-v-06643c89>const</span> searchArr <span class="token operator" data-v-06643c89>=</span> search<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>split</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'&amp;'</span><span class="token punctuation" data-v-06643c89>)</span>
  searchArr<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>forEach</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>v</span> <span class="token operator" data-v-06643c89>=&gt;</span> <span class="token punctuation" data-v-06643c89>{</span>
    <span class="token comment" data-v-06643c89>// 避免出现==的入参</span>
    <span class="token keyword" data-v-06643c89>const</span> index <span class="token operator" data-v-06643c89>=</span> v<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>indexOf</span><span class="token punctuation" data-v-06643c89>(</span><span class="token string" data-v-06643c89>'='</span><span class="token punctuation" data-v-06643c89>)</span>
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>index <span class="token operator" data-v-06643c89>!==</span> <span class="token operator" data-v-06643c89>-</span><span class="token number" data-v-06643c89>1</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
      <span class="token keyword" data-v-06643c89>const</span> name <span class="token operator" data-v-06643c89>=</span> v<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>substring</span><span class="token punctuation" data-v-06643c89>(</span><span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>,</span> index<span class="token punctuation" data-v-06643c89>)</span>
      <span class="token keyword" data-v-06643c89>const</span> val <span class="token operator" data-v-06643c89>=</span> v<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>substring</span><span class="token punctuation" data-v-06643c89>(</span>index <span class="token operator" data-v-06643c89>+</span> <span class="token number" data-v-06643c89>1</span><span class="token punctuation" data-v-06643c89>,</span> v<span class="token punctuation" data-v-06643c89>.</span>length<span class="token punctuation" data-v-06643c89>)</span>
      obj<span class="token punctuation" data-v-06643c89>[</span>name<span class="token punctuation" data-v-06643c89>]</span> <span class="token operator" data-v-06643c89>=</span> val
    <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token keyword" data-v-06643c89>return</span> obj
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89><span class="line-number" data-v-06643c89>19</span><br data-v-06643c89><span class="line-number" data-v-06643c89>20</span><br data-v-06643c89><span class="line-number" data-v-06643c89>21</span><br data-v-06643c89><span class="line-number" data-v-06643c89>22</span><br data-v-06643c89><span class="line-number" data-v-06643c89>23</span><br data-v-06643c89></div></div><h2 id="key-codes" data-v-06643c89><a href="#key-codes" class="header-anchor" data-v-06643c89>#</a> key Codes</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token keyword" data-v-06643c89>const</span> keyCodes <span class="token operator" data-v-06643c89>=</span> Object<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>freeze</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>{</span>
  enter<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>13</span><span class="token punctuation" data-v-06643c89>,</span>
  tab<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>9</span><span class="token punctuation" data-v-06643c89>,</span>
  <span class="token keyword" data-v-06643c89>delete</span><span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>46</span><span class="token punctuation" data-v-06643c89>,</span>
  esc<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>27</span><span class="token punctuation" data-v-06643c89>,</span>
  space<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>32</span><span class="token punctuation" data-v-06643c89>,</span>
  up<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>38</span><span class="token punctuation" data-v-06643c89>,</span>
  down<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>40</span><span class="token punctuation" data-v-06643c89>,</span>
  left<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>37</span><span class="token punctuation" data-v-06643c89>,</span>
  right<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>39</span><span class="token punctuation" data-v-06643c89>,</span>
  end<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>35</span><span class="token punctuation" data-v-06643c89>,</span>
  home<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>36</span><span class="token punctuation" data-v-06643c89>,</span>
  del<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>46</span><span class="token punctuation" data-v-06643c89>,</span>
  backspace<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>8</span><span class="token punctuation" data-v-06643c89>,</span>
  insert<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>45</span><span class="token punctuation" data-v-06643c89>,</span>
  pageup<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>33</span><span class="token punctuation" data-v-06643c89>,</span>
  pagedown<span class="token operator" data-v-06643c89>:</span> <span class="token number" data-v-06643c89>34</span><span class="token punctuation" data-v-06643c89>,</span>
<span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>)</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89><span class="line-number" data-v-06643c89>18</span><br data-v-06643c89></div></div><h2 id="垂直滚动" data-v-06643c89><a href="#垂直滚动" class="header-anchor" data-v-06643c89>#</a> 垂直滚动</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 垂直滚动
 * @param {HTMLElement} element 需要滚动的dom
 * @param {Number} to 需要滚动到的位置
 * @param {Number} duration 滚动过渡时间（毫秒）
 * @return {*}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>scrollTo</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>element<span class="token punctuation" data-v-06643c89>,</span> to<span class="token punctuation" data-v-06643c89>,</span> duration</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>duration <span class="token operator" data-v-06643c89>&lt;=</span> <span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token keyword" data-v-06643c89>return</span>
  <span class="token keyword" data-v-06643c89>const</span> difference <span class="token operator" data-v-06643c89>=</span> to <span class="token operator" data-v-06643c89>-</span> element<span class="token punctuation" data-v-06643c89>.</span>scrollTop
  <span class="token keyword" data-v-06643c89>const</span> perTick <span class="token operator" data-v-06643c89>=</span> difference <span class="token operator" data-v-06643c89>/</span> <span class="token punctuation" data-v-06643c89>(</span>duration <span class="token operator" data-v-06643c89>/</span> <span class="token number" data-v-06643c89>50</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token function" data-v-06643c89>setTimeout</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>=&gt;</span> <span class="token punctuation" data-v-06643c89>{</span>
    element<span class="token punctuation" data-v-06643c89>.</span>scrollTop <span class="token operator" data-v-06643c89>=</span> element<span class="token punctuation" data-v-06643c89>.</span>scrollTop <span class="token operator" data-v-06643c89>+</span> perTick
    <span class="token keyword" data-v-06643c89>if</span> <span class="token punctuation" data-v-06643c89>(</span>element<span class="token punctuation" data-v-06643c89>.</span>scrollTop <span class="token operator" data-v-06643c89>===</span> to<span class="token punctuation" data-v-06643c89>)</span> <span class="token keyword" data-v-06643c89>return</span>
    <span class="token function" data-v-06643c89>scrollTo</span><span class="token punctuation" data-v-06643c89>(</span>element<span class="token punctuation" data-v-06643c89>,</span> to<span class="token punctuation" data-v-06643c89>,</span> duration <span class="token operator" data-v-06643c89>-</span> <span class="token number" data-v-06643c89>50</span><span class="token punctuation" data-v-06643c89>)</span>
  <span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>,</span> <span class="token number" data-v-06643c89>50</span><span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89><span class="line-number" data-v-06643c89>16</span><br data-v-06643c89><span class="line-number" data-v-06643c89>17</span><br data-v-06643c89></div></div><h2 id="arraybuffer转base64" data-v-06643c89><a href="#arraybuffer转base64" class="header-anchor" data-v-06643c89>#</a> ArrayBuffer转Base64</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description ArrayBuffer转Base64
 * @param {Array} buffer byte array
 * @return {String}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>transformArrayBufferToBase64</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>buffer</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>let</span> binary <span class="token operator" data-v-06643c89>=</span> <span class="token string" data-v-06643c89>''</span><span class="token punctuation" data-v-06643c89>;</span>
  <span class="token keyword" data-v-06643c89>const</span> bytes <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>new</span> <span class="token class-name" data-v-06643c89>Uint8Array</span><span class="token punctuation" data-v-06643c89>(</span>buffer<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>;</span>
  <span class="token keyword" data-v-06643c89>for</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token keyword" data-v-06643c89>let</span> len <span class="token operator" data-v-06643c89>=</span> bytes<span class="token punctuation" data-v-06643c89>.</span>byteLength<span class="token punctuation" data-v-06643c89>,</span> i <span class="token operator" data-v-06643c89>=</span> <span class="token number" data-v-06643c89>0</span><span class="token punctuation" data-v-06643c89>;</span> i <span class="token operator" data-v-06643c89>&lt;</span> len<span class="token punctuation" data-v-06643c89>;</span> i<span class="token operator" data-v-06643c89>++</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
    binary <span class="token operator" data-v-06643c89>+=</span> String<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>fromCharCode</span><span class="token punctuation" data-v-06643c89>(</span>bytes<span class="token punctuation" data-v-06643c89>[</span>i<span class="token punctuation" data-v-06643c89>]</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>;</span>
  <span class="token punctuation" data-v-06643c89>}</span>
  <span class="token keyword" data-v-06643c89>return</span> window<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>btoa</span><span class="token punctuation" data-v-06643c89>(</span>binary<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>;</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89></div></div><h2 id="拼音首字母排序" data-v-06643c89><a href="#拼音首字母排序" class="header-anchor" data-v-06643c89>#</a> 拼音首字母排序</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 拼音首字母排序
 * @param {Array} arr 中文汉字组成的数组
 * @return {Array}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>sortByPinyin</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>arr</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> arr<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>sort</span><span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>a<span class="token punctuation" data-v-06643c89>,</span> b</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token operator" data-v-06643c89>=&gt;</span> a<span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>localeCompare</span><span class="token punctuation" data-v-06643c89>(</span>b<span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89></div></div><h2 id="扁平数据转树数据-已知单根" data-v-06643c89><a href="#扁平数据转树数据-已知单根" class="header-anchor" data-v-06643c89>#</a> 扁平数据转树数据(已知单根)</h2> <div class="language-js line-numbers-mode" data-v-06643c89><pre class="language-js" data-v-06643c89><code data-v-06643c89><span class="token comment" data-v-06643c89>/**
 * @description 扁平数据转树数据
 * @param {Array} items 元素组
 * @param {Array} id 根id 默认 null
 * @param {Array} link 父id 字段名称 默认 parentId
 * @return {Array}
 */</span>
<span class="token keyword" data-v-06643c89>function</span> <span class="token function" data-v-06643c89>flat2Tree</span><span class="token punctuation" data-v-06643c89>(</span>items<span class="token punctuation" data-v-06643c89>,</span> id <span class="token operator" data-v-06643c89>=</span> <span class="token keyword" data-v-06643c89>null</span><span class="token punctuation" data-v-06643c89>,</span> link <span class="token operator" data-v-06643c89>=</span> <span class="token string" data-v-06643c89>'parentId'</span><span class="token punctuation" data-v-06643c89>)</span> <span class="token punctuation" data-v-06643c89>{</span>
  <span class="token keyword" data-v-06643c89>return</span> items
    <span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>filter</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>item</span> <span class="token operator" data-v-06643c89>=&gt;</span> item<span class="token punctuation" data-v-06643c89>[</span>link<span class="token punctuation" data-v-06643c89>]</span> <span class="token operator" data-v-06643c89>===</span> id<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token punctuation" data-v-06643c89>.</span><span class="token function" data-v-06643c89>map</span><span class="token punctuation" data-v-06643c89>(</span><span class="token parameter" data-v-06643c89>item</span> <span class="token operator" data-v-06643c89>=&gt;</span> <span class="token punctuation" data-v-06643c89>(</span><span class="token punctuation" data-v-06643c89>{</span>
      <span class="token operator" data-v-06643c89>...</span>item<span class="token punctuation" data-v-06643c89>,</span>
      children<span class="token operator" data-v-06643c89>:</span> <span class="token function" data-v-06643c89>flat2Tree</span><span class="token punctuation" data-v-06643c89>(</span>items<span class="token punctuation" data-v-06643c89>,</span> item<span class="token punctuation" data-v-06643c89>.</span>id，link<span class="token punctuation" data-v-06643c89>)</span>
    <span class="token punctuation" data-v-06643c89>}</span><span class="token punctuation" data-v-06643c89>)</span><span class="token punctuation" data-v-06643c89>)</span>
<span class="token punctuation" data-v-06643c89>}</span>
</code></pre> <div class="line-numbers-wrapper" data-v-06643c89><span class="line-number" data-v-06643c89>1</span><br data-v-06643c89><span class="line-number" data-v-06643c89>2</span><br data-v-06643c89><span class="line-number" data-v-06643c89>3</span><br data-v-06643c89><span class="line-number" data-v-06643c89>4</span><br data-v-06643c89><span class="line-number" data-v-06643c89>5</span><br data-v-06643c89><span class="line-number" data-v-06643c89>6</span><br data-v-06643c89><span class="line-number" data-v-06643c89>7</span><br data-v-06643c89><span class="line-number" data-v-06643c89>8</span><br data-v-06643c89><span class="line-number" data-v-06643c89>9</span><br data-v-06643c89><span class="line-number" data-v-06643c89>10</span><br data-v-06643c89><span class="line-number" data-v-06643c89>11</span><br data-v-06643c89><span class="line-number" data-v-06643c89>12</span><br data-v-06643c89><span class="line-number" data-v-06643c89>13</span><br data-v-06643c89><span class="line-number" data-v-06643c89>14</span><br data-v-06643c89><span class="line-number" data-v-06643c89>15</span><br data-v-06643c89></div></div> <br data-v-06643c89>
未完待续...
</div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com//mayunhai/mayunhai/edit/master/docs/util/README.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3/21/2021, 9:30:21 PM</span></div></footer> <!----> </main></div><div class="global-ui"><BackToTop></BackToTop><!----></div></div>
    <script src="/mayunhai/assets/js/app.31cf851b.js" defer></script><script src="/mayunhai/assets/js/2.f955f218.js" defer></script><script src="/mayunhai/assets/js/20.d5696074.js" defer></script><script src="/mayunhai/assets/js/11.3096fc76.js" defer></script>
  </body>
</html>
